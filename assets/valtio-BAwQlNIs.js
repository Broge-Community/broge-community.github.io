import{h as z,y as U}from"./proxy-compare-DDw08AJZ.js";var v={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const W=r=>typeof r=="object"&&r!==null,g=new WeakMap,L=new WeakSet,q=(r=Object.is,l=(t,y)=>new Proxy(t,y),h=t=>W(t)&&!L.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer),b=t=>{switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t}},c=new WeakMap,f=(t,y,P=b)=>{const a=c.get(t);if((a==null?void 0:a[0])===y)return a[1];const u=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return z(u,!0),c.set(t,[y,u]),Reflect.ownKeys(t).forEach(O=>{if(Object.getOwnPropertyDescriptor(u,O))return;const w=Reflect.get(t,O),m={value:w,enumerable:!0,configurable:!0};if(L.has(w))z(w,!1);else if(w instanceof Promise)delete m.value,m.get=()=>P(w);else if(g.has(w)){const[i,M]=g.get(w);m.value=f(i,M(),P)}Object.defineProperty(u,O,m)}),Object.preventExtensions(u)},S=new WeakMap,d=[1,1],V=t=>{if(!W(t))throw new Error("object required");const y=S.get(t);if(y)return y;let P=d[0];const a=new Set,u=(n,s=++d[0])=>{P!==s&&(P=s,a.forEach(e=>e(n,s)))};let O=d[1];const w=(n=++d[1])=>(O!==n&&!a.size&&(O=n,i.forEach(([s])=>{const e=s[1](n);e>P&&(P=e)})),P),m=n=>(s,e)=>{const o=[...s];o[1]=[n,...o[1]],u(o,e)},i=new Map,M=(n,s)=>{if((v?"production":void 0)!=="production"&&i.has(n))throw new Error("prop listener already exists");if(a.size){const e=s[3](m(n));i.set(n,[s,e])}else i.set(n,[s])},_=n=>{var s;const e=i.get(n);e&&(i.delete(n),(s=e[1])==null||s.call(e))},K=n=>(a.add(n),a.size===1&&i.forEach(([e,o],R)=>{if((v?"production":void 0)!=="production"&&o)throw new Error("remove already exists");const p=e[3](m(R));i.set(R,[e,p])}),()=>{a.delete(n),a.size===0&&i.forEach(([e,o],R)=>{o&&(o(),i.set(R,[e]))})}),D=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t)),j=l(D,{deleteProperty(n,s){const e=Reflect.get(n,s);_(s);const o=Reflect.deleteProperty(n,s);return o&&u(["delete",[s],e]),o},set(n,s,e,o){const R=Reflect.has(n,s),p=Reflect.get(n,s,o);if(R&&(r(p,e)||S.has(e)&&r(p,S.get(e))))return!0;_(s),W(e)&&(e=U(e)||e);let A=e;if(e instanceof Promise)e.then(E=>{e.status="fulfilled",e.value=E,u(["resolve",[s],E])}).catch(E=>{e.status="rejected",e.reason=E,u(["reject",[s],E])});else{!g.has(e)&&h(e)&&(A=V(e));const E=!L.has(A)&&g.get(A);E&&M(s,E)}return Reflect.set(n,s,A,o),u(["set",[s],e,p]),!0}});S.set(t,j);const B=[D,w,f,K];return g.set(j,B),Reflect.ownKeys(t).forEach(n=>{const s=Object.getOwnPropertyDescriptor(t,n);"value"in s&&(j[n]=t[n],delete s.value,delete s.writable),Object.defineProperty(D,n,s)}),j})=>[V,g,L,r,l,h,b,c,f,S,d],[F]=q();function J(r={}){return F(r)}function N(r,l,h){const b=g.get(r);(v?"production":void 0)!=="production"&&!b&&console.warn("Please use proxy object");let c;const f=[],S=b[3];let d=!1;const t=S(y=>{f.push(y),c||(c=Promise.resolve().then(()=>{c=void 0,d&&l(f.splice(0))}))});return d=!0,()=>{d=!1,t()}}function Q(r,l){const h=g.get(r);(v?"production":void 0)!=="production"&&!h&&console.warn("Please use proxy object");const[b,c,f]=h;return f(b,c(),l)}function T(r){return L.add(r),r}function X(r,l,h,b){let c=r[l];return N(r,()=>{const f=r[l];Object.is(c,f)||h(c=f)})}export{Q as a,X as b,J as p,T as r,N as s};
//# sourceMappingURL=valtio-BAwQlNIs.js.map
